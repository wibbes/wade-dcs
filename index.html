<html>
  <body>
    <p id='server-time'></p>
	<p id='log'></p>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();
      var el = document.getElementById('server-time');
	   var log = document.getElementById('log');

	   var Machine = getUrlParam('Machine');
	   var Payload = getUrlParam('Payload');
		if (Machine > "") {
    // do something with the id
	console.log("Payload Exists");
	console.log(Payload);
	console.log(JSON.parse(Payload));
	socket.emit("Machine",JSON.parse(Payload));
	
		} else {
    // there is no id value
	console.log("Payload Not Found");
		}
	   
	   
      socket.on('time', function(timeString) {
        el.innerHTML = 'Server time: ' + timeString;
      });
	   socket.on('Machine', function(data) {
	   console.log(data);
        log.innerHTML = log.innerHTML + data + '<br /> ';
      }
	  );
	  
	  function getUrlParam(name) {
		var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
		return (results && results[1]) || undefined;
		}
    </script>
  </body>
</html>
